DEFINE NEW GLOBAL SHARED VARIABLE s-periodo  AS INTEGER FORMAT "9999".
DEFINE NEW GLOBAL SHARED VARIABLE S-CODALM   AS CHARACTER INIT '11' FORMAT "X(3)".
DEFINE NEW GLOBAL SHARED VARIABLE S-DESALM   AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODDIV   AS CHARACTER INIT '00000'.
DEFINE NEW GLOBAL SHARED VARIABLE lh_Handle  AS HANDLE.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODCIA   AS INTEGER INIT 1.
DEFINE NEW GLOBAL SHARED VARIABLE CB-CODCIA  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE CL-CODCIA  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE PV-CODCIA  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE S-OPSYS    AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-NOMCIA   AS CHAR INIT "CONTINENTAL S.A.C".
DEFINE NEW GLOBAL SHARED VARIABLE S-USER-ID  AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-NROSER   AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE S-MOVVAL   AS LOGICAL.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODFAM   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-TPOMOV   AS CHAR INIT 'S'.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODMOV   AS INTEGER.
DEFINE NEW GLOBAL SHARED VARIABLE S-MOVTRF   AS INTEGER.
DEFINE NEW GLOBAL SHARED VARIABLE S-TIPMOV   AS CHAR INIT "I".
DEFINE NEW GLOBAL SHARED VARIABLE S-ROWID    AS ROWID.
DEFINE NEW GLOBAL SHARED VARIABLE s-Parametro  AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE s-Reposicion AS LOG.
DEFINE NEW GLOBAL SHARED VARIABLE s-OrdenDespacho AS LOG.
DEFINE NEW GLOBAL SHARED VARIABLE s-AlmDes LIKE  Almcmov.AlmDes.
DEFINE NEW GLOBAL SHARED VARIABLE S-FLGEST   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-FLGSIT   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODDOC AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODPRO AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODREF AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-NROREF AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE s-tipo       AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE s-tabla      AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-TpoFac   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-MOVING   AS INT.
DEFINE NEW GLOBAL SHARED VARIABLE S-MOVSAL   AS INT.
DEFINE NEW GLOBAL SHARED VARIABLE S-FCHDOC   AS DATE.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODMAT   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-PROVEE  AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE s-PorIgv   LIKE Ccbcdocu.PorIgv.
DEFINE NEW GLOBAL SHARED VARIABLE s-NroRf3   LIKE Almcmov.NroRf3.

DEFINE NEW GLOBAL SHARED TEMP-TABLE T-Rutad LIKE integral.DI-Rutad.                                                                   
DEFINE NEW GLOBAL SHARED TEMP-TABLE ITEM   LIKE integral.almdmov.
DEFINE NEW GLOBAL SHARED TEMP-TABLE ITEM-1 LIKE integral.almdmov.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-INGKIT NO-UNDO LIKE integral.almdmov.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-SALKIT NO-UNDO LIKE integral.almdmov.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DREP LIKE integral.Almdrequ.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DOTRB LIKE integral.Almdotrb.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DETA LIKE CcbDDocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-GLOSA LIKE CcbGDocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-RDOC  LIKE CcbRDocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-RutaDv NO-UNDO LIKE INTEGRAL.Di-RutaDv.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-MATG LIKE almmmatg.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CMOV LIKE AlmCMov.
DEFINE NEW GLOBAL SHARED VARIABLE whDialog AS HANDLE NO-UNDO.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DREQ LIKE integral.LG-DREQU.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-DREPO LIKE almdrepo.


DEFINE NEW GLOBAL SHARED VARIABLE input-var-1 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE input-var-2 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE input-var-3 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE output-var-1 AS ROWID.
DEFINE NEW GLOBAL SHARED VARIABLE output-var-2 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE output-var-3 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE s-adm-new-record AS CHAR.

DEFINE NEW GLOBAL SHARED TEMP-TABLE t-prev 
      FIELD Tipo AS CHAR
      FIELD Subalm AS CHAR
      FIELD Codmov AS INTEGER
      FIELD NroGui AS CHAR
      FIELD Periodo LIKE cb-dmov.periodo
      FIELD NroMes LIKE cb-dmov.nromes
      FIELD Codope LIKE cb-dmov.codope
      FIELD Codcta LIKE cb-dmov.codcta
      FIELD CodDiv LIKE cb-dmov.coddiv
      FIELD Codmon LIKE cb-dmov.codmon
      FIELD Fchdoc LIKE cb-dmov.fchdoc
      FIELD Coddoc LIKE cb-dmov.coddoc
      FIELD Nrodoc LIKE cb-dmov.nrodoc
      FIELD Glodoc LIKE cb-dmov.glodoc
      FIELD Tpocmb LIKE cb-dmov.tpocmb
      FIELD TpoMov LIKE cb-dmov.tpomov
      FIELD ImpMn1 LIKE cb-dmov.impmn1 
      FIELD ImpMn2 LIKE cb-dmov.impmn2
      FIELD cco    LIKE cb-dmov.cco  
      FIELD clfaux LIKE cb-dmov.Clfaux
      FIELD codaux LIKE cb-dmov.Codaux
      FIELD Codref LIKE cb-dmov.codref
      FIELD Nroref LIKE cb-dmov.nroref
      INDEX IDX01 Tipo.

DEFINE NEW GLOBAL SHARED VARIABLE C-CODALM  AS CHARACTER FORMAT "X(3)".
DEFINE NEW GLOBAL SHARED VARIABLE ORDTRB    AS CHARACTER .
DEFINE NEW GLOBAL SHARED VARIABLE c-CODMOV  AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE L-NROSER  AS CHAR.

ASSIGN s-periodo = 2008
       S-CODCIA  = 1.



DEF NEW GLOBAL SHARED TEMP-TABLE T-Ajuste
    FIELD CodMat LIKE Almmmatg.CodMat
    FIELD DesMat LIKE Almmmatg.CodMat
    FIELD UndStk LIKE Almmmatg.CodMat
    FIELD CodAlm LIKE Almdmov.Codalm
    FIELD StkSub LIKE Almdmov.CanDes
    FIELD Dife   LIKE Almdmov.CanDes
    FIELD TipMov LIKE Almdmov.TipMov
    FIELD TipInv LIKE Almdmov.TipMov
    INDEX Idx01 IS UNIQUE PRIMARY
          CodMat DESCENDING
    INDEX Idx02
          TipMov DESCENDING
          TipInv DESCENDING.

DEF NEW SHARED BUFFER buff-ingkit FOR almcmov.

/* RHC 31.05.2011 UTILEX */
DEF NEW GLOBAL SHARED TEMP-TABLE T-DMOV LIKE Almdmov
    INDEX Llave01 CodCia NroItm.
