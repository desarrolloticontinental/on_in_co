DEFINE NEW GLOBAL SHARED VAR ltxtDesde AS DATE.
DEFINE NEW GLOBAL SHARED VAR ltxtHasta AS DATE.
DEFINE NEW GLOBAL SHARED VAR lChequeados AS LOGICAL.
DEFINE NEW GLOBAL SHARED VAR pSoloImpresos AS LOGICAL.
DEFINE NEW GLOBAL SHARED VAR pOrdenCompra AS CHAR INIT ''.  /* Supermercados Peruanos */
DEFINE NEW GLOBAL SHARED VAR s-busqueda AS CHAR.
DEFINE NEW GLOBAL SHARED VAR lMsgRetorno  AS CHAR.


DEFINE NEW GLOBAL SHARED VAR s-clave AS CHAR.
DEFINE NEW GLOBAL SHARED VAR s-Codigo AS CHAR.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CGUIAS LIKE Ccbcdocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CFAIS LIKE Ccbcdocu.
DEF NEW GLOBAL SHARED VAR s-Create-Record AS LOG.
DEF NEW GLOBAL SHARED VAR s-Write-Record AS LOG.
DEF NEW GLOBAL SHARED VAR s-Delete-Record AS LOG.
DEF NEW GLOBAL SHARED VAR s-Confirm-Record AS LOG.
DEF NEW GLOBAL SHARED VAR s-Dias-Limite AS INT NO-UNDO.
DEFINE NEW GLOBAL SHARED VARIABLE s-Sunat-Activo AS LOG.
DEF NEW GLOBAL SHARED VAR s-permiso-anulacion AS LOG.
DEFINE NEW GLOBAL SHARED VARIABLE s-Tipo-Abastecimiento AS CHAR INIT 'NORMAL'.
DEFINE NEW GLOBAL SHARED VARIABLE S-TPOPED   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODMON   AS INTEGER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODCLI   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-TPOCMB AS DECIMAL.  
DEFINE NEW GLOBAL SHARED VARIABLE S-NROCOT   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE s-PorIgv LIKE Ccbcdocu.PorIgv.
DEFINE NEW GLOBAL SHARED VAR s-adm-new-record AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-NROPED   AS CHAR.
DEF NEW GLOBAL SHARED VAR s-FlgEmpaque LIKE GN-DIVI.FlgEmpaque.
DEF NEW GLOBAL SHARED VAR s-DiasVtoPed LIKE GN-DIVI.DiasVtoPed.
DEF NEW GLOBAL SHARED VAR s-VentaMayorista LIKE GN-DIVI.VentaMayorista.
DEFINE NEW GLOBAL SHARED VARIABLE S-TPOPED2   AS CHAR.   /* Para ValesUtilex */
DEF NEW GLOBAL SHARED VAR s-FlgIgv AS LOG INIT TRUE.
DEFINE NEW GLOBAL SHARED VARIABLE S-FMAPGO   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-TpoFac   AS CHAR.


/* RHC 10/10/18 Variables de control Transportes y Hoja de Ruta */
DEF NEW GLOBAL SHARED VAR s-HR-Manual AS LOG INIT NO NO-UNDO.
DEFINE NEW GLOBAL SHARED VAR s-acceso-total  AS LOG.
DEFINE NEW GLOBAL SHARED TEMP-TABLE tt-w-report NO-UNDO LIKE w-report.
DEF NEW GLOBAL SHARED VAR s-nivel-acceso AS INT INIT 0 NO-UNDO.

/* RHC 21/05/2018 Se van a definir las llaves para cada pestaña de trabajo */
/* Capacidad */
DEF NEW GLOBAL SHARED VAR s-Llave-Capacidad AS CHAR.
s-Llave-Capacidad = "CDSKU_OD".
DEF NEW GLOBAL SHARED VAR s-Llave-Zona AS CHAR.
s-Llave-Zona = "SZGHRXDIA_OD".
DEF NEW GLOBAL SHARED VAR s-Llave-Canal AS CHAR.
s-Llave-Canal = "CANALHR_OD".
DEF NEW GLOBAL SHARED VAR s-Llave-CanalDia AS CHAR.
s-Llave-CanalDia = "CANALHRXDIA_OD".

DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CPEDI NO-UNDO LIKE FacCPedi.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-DPEDI NO-UNDO LIKE FacDPedi.

DEFINE NEW GLOBAL SHARED TEMP-TABLE CPEDI NO-UNDO LIKE FacCPedi
    FIELD Bultos AS INT FORMAT '>,>>9'
    FIELD Zona AS CHAR
.


DEFINE NEW GLOBAL SHARED VARIABLE s-periodo AS INTEGER FORMAT "9999".
DEFINE NEW GLOBAL SHARED VARIABLE S-CODALM  AS CHARACTER INIT '11' FORMAT "X(3)".
DEFINE NEW GLOBAL SHARED VARIABLE S-DESALM  AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODDIV  AS CHARACTER INIT '00000'.
DEFINE NEW GLOBAL SHARED VARIABLE lh_Handle AS HANDLE.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODCIA  AS INTEGER INIT 1.
DEFINE NEW GLOBAL SHARED VARIABLE CB-CODCIA  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE CL-CODCIA  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE PV-CODCIA  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE S-OPSYS   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-NOMCIA  AS CHAR INIT "CONTINENTAL S.A.C".
DEFINE NEW GLOBAL SHARED VARIABLE S-USER-ID AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-NROSER  AS INTEGER INIT 0.
DEFINE NEW GLOBAL SHARED VARIABLE S-MOVVAL  AS LOGICAL.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODFAM  AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-TPOMOV   AS CHAR INIT 'S'.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODMOV   AS INTEGER.
DEFINE NEW GLOBAL SHARED VARIABLE S-MOVTRF   AS INTEGER.
DEFINE NEW GLOBAL SHARED VARIABLE S-TIPMOV   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-ROWID   AS ROWID.
DEFINE NEW GLOBAL SHARED VARIABLE s-Parametro AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE s-Reposicion AS LOG.
DEFINE NEW GLOBAL SHARED VARIABLE s-AlmDes LIKE  Almcmov.AlmDes.
DEFINE NEW GLOBAL SHARED VARIABLE S-FLGEST   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-FLGSIT   AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODDOC AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-NRODOC AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODPRO AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-CODREF AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE S-NROREF AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE s-tipo       AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE s-tabla      AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE s-numero     AS INTEGER.
DEFINE NEW GLOBAL SHARED VARIABLE s-TipoCalculo AS CHAR.   /* "GRUPO" "TIENDA" */

DEFINE NEW GLOBAL SHARED TEMP-TABLE T-RutaC LIKE integral.DI-RutaC.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-Rutad LIKE integral.DI-RutaD.
DEFINE NEW GLOBAL SHARED TEMP-TABLE ITEM LIKE integral.almdmov.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DREP LIKE integral.Almdrequ.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DOTRB LIKE integral.Almdotrb.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DETA LIKE CcbDDocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-GLOSA LIKE CcbGDocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-RDOC  LIKE CcbRDocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-RutaDv NO-UNDO LIKE INTEGRAL.Di-RutaDv.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-MATG LIKE almmmatg.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CMOV LIKE AlmCMov.
DEFINE NEW GLOBAL SHARED VARIABLE whDialog AS HANDLE NO-UNDO.
DEFINE NEW GLOBAL SHARED TEMP-TABLE DREQ LIKE integral.LG-DREQU.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-DREPO LIKE almdrepo.
DEFINE NEW GLOBAL SHARED TEMP-TABLE PEDI LIKE FacDPedi.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-FACTABLA LIKE FacTabla.
DEFINE NEW GLOBAL SHARED TEMP-TABLE t-vtactabla LIKE VtaCTabla.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CDOCU LIKE Ccbcdocu.
DEFINE NEW GLOBAL SHARED TEMP-TABLE T-CALMD NO-UNDO LIKE Almcdocu 
    FIELD CodDiv AS CHAR.

DEFINE NEW GLOBAL SHARED VARIABLE input-var-1 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE input-var-2 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE input-var-3 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE input-var-4 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE output-var-1 AS ROWID.
DEFINE NEW GLOBAL SHARED VARIABLE output-var-2 AS CHARACTER.
DEFINE NEW GLOBAL SHARED VARIABLE output-var-3 AS CHARACTER.

DEFINE NEW GLOBAL SHARED TEMP-TABLE t-prev 
      FIELD Tipo AS CHAR
      FIELD Subalm AS CHAR
      FIELD Codmov AS INTEGER
      FIELD NroGui AS CHAR
      FIELD Periodo LIKE cb-dmov.periodo
      FIELD NroMes LIKE cb-dmov.nromes
      FIELD Codope LIKE cb-dmov.codope
      FIELD Codcta LIKE cb-dmov.codcta
      FIELD CodDiv LIKE cb-dmov.coddiv
      FIELD Codmon LIKE cb-dmov.codmon
      FIELD Fchdoc LIKE cb-dmov.fchdoc
      FIELD Coddoc LIKE cb-dmov.coddoc
      FIELD Nrodoc LIKE cb-dmov.nrodoc
      FIELD Glodoc LIKE cb-dmov.glodoc
      FIELD Tpocmb LIKE cb-dmov.tpocmb
      FIELD TpoMov LIKE cb-dmov.tpomov
      FIELD ImpMn1 LIKE cb-dmov.impmn1 
      FIELD ImpMn2 LIKE cb-dmov.impmn2
      FIELD cco    LIKE cb-dmov.cco  
      FIELD clfaux LIKE cb-dmov.Clfaux
      FIELD codaux LIKE cb-dmov.Codaux
      FIELD Codref LIKE cb-dmov.codref
      FIELD Nroref LIKE cb-dmov.nroref
      INDEX IDX01 Tipo.

DEFINE NEW GLOBAL SHARED VARIABLE C-CODALM  AS CHARACTER FORMAT "X(3)".
DEFINE NEW GLOBAL SHARED VARIABLE ORDTRB    AS CHARACTER .
DEFINE NEW GLOBAL SHARED VARIABLE c-CODMOV  AS CHAR.
DEFINE NEW GLOBAL SHARED VARIABLE L-NROSER  AS CHAR.

ASSIGN s-periodo = 2008
       S-CODCIA  = 1.



DEF NEW GLOBAL SHARED TEMP-TABLE T-Ajuste
    FIELD CodMat LIKE Almmmatg.CodMat
    FIELD DesMat LIKE Almmmatg.CodMat
    FIELD UndStk LIKE Almmmatg.CodMat
    FIELD CodAlm LIKE Almdmov.Codalm
    FIELD StkSub LIKE Almdmov.CanDes
    FIELD Dife   LIKE Almdmov.CanDes
    FIELD TipMov LIKE Almdmov.TipMov
    FIELD TipInv LIKE Almdmov.TipMov
    INDEX Idx01 IS UNIQUE PRIMARY
          CodMat DESCENDING
    INDEX Idx02
          TipMov DESCENDING
          TipInv DESCENDING.

